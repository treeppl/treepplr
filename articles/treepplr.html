<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick package overview • treepplr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quick package overview">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">treepplr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.11.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/treepplr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/coin-example.html">Coin flipping</a></li>
    <li><a class="dropdown-item" href="../articles/crbd-example.html">Constant-rate Birth Death example</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/treeppl/treepplr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick package overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/treeppl/treepplr/blob/main/vignettes/treepplr.Rmd" class="external-link"><code>vignettes/treepplr.Rmd</code></a></small>
      <div class="d-none name"><code>treepplr.Rmd</code></div>
    </div>

    
    
<p><code>treepplr</code> is an interface for using the TreePPL program.
All functions start with <code>tp_</code> to easily distinguish them
from functions from other packages.</p>
<p>The three necessary parts for doing analysis with TreePPL are: model,
data and inference machinery.</p>
<div class="section level2">
<h2 id="model">Model<a class="anchor" aria-label="anchor" href="#model"></a>
</h2>
<p>You can choose a model in TreePPL language from our <a href="https://treeppl.org/docs/model-library" class="external-link">library</a> or you can
write your own model.</p>
<p>To list all available models in our library, use
<code><a href="../reference/tp_model_library.html">tp_model_library()</a></code> to retrieve the models within the <a href="https://github.com/treeppl/treeppl/tree/main/models" class="external-link">TreePPL
github repository</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_lib</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_model_library.html">tp_model_library</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To use one of these models you just need it’s name in
<code>model_lib$model_name</code>.</p>
<p>If you want to use your own custom model, you will need to write it
in TreePPL language and pass it to an R object that contains either the
full path to the <code>.tppl</code> file containing the model, or a
string with the full model.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import a model from file</span></span>
<span><span class="va">model_path</span> <span class="op">&lt;-</span> <span class="st">"path/to/my_model.tppl"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<!-- waiting -->
<!-- Each model accepts specific data types. There is a helper function that tells -->
<!-- you which data input a given model needs. -->
<!-- ```{r} -->
<!-- tp_expected_input() -->
<!-- ``` -->
<p>TreePPL only reads a custom JSON format, so <code>treepplr</code>
converts a variety of input data to this format and writes to file,
which will then be used by TreePPL. Here are some examples:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for models that only need a phylogenetic tree</span></span>
<span><span class="va">phylo</span> <span class="op">&lt;-</span> <span class="fu">ape</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ape/man/read.tree.html" class="external-link">read.tree</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"path/to/your/file.tre"</span><span class="op">)</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_data.html">tp_data</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">phylo</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or sequence data</span></span>
<span><span class="va">fasta_file</span> <span class="op">&lt;-</span> <span class="st">"path/to/your/file.fasta"</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_data.html">tp_data</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">fasta_file</span><span class="op">)</span></span></code></pre></div>
<p>As for models, you can also use test datasets from the TreePPL
library by passing the name of the model (we’ll come back to this
later).</p>
</div>
<div class="section level2">
<h2 id="inference-method">Inference method<a class="anchor" aria-label="anchor" href="#inference-method"></a>
</h2>
<p>TreePPL offers a variety of inference methods. Different methods work
best for different models. See the <a href="https://treeppl.org/docs/model-library" class="external-link">model library</a> for our
recommendations of which inference methods to choose for each model.</p>
<!-- waiting -->
<!-- For a full list of inference methods supported by TreePPL run: -->
<!-- ```{r} -->
<!-- tp_compile_options() -->
<!-- ``` -->
</div>
<div class="section level2">
<h2 id="compilation">Compilation<a class="anchor" aria-label="anchor" href="#compilation"></a>
</h2>
<p>Once you have chosen the model and the inference method you want to
use, you can compile your model to en executable that also contains the
necessary machinery to run the chosen inference method.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using a model from the library and a Sequential Monte Carlo method</span></span>
<span><span class="va">exe_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_compile.html">tp_compile</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"crbd"</span>, method <span class="op">=</span> <span class="st">"smc-apf"</span>, particles <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using a custom model and a Markov chain Monte Carlo method</span></span>
<span><span class="va">exe_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_compile.html">tp_compile</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_path</span>, method <span class="op">=</span> <span class="st">"mcmc-lightweight"</span>,</span>
<span>                       iterations <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running">Running<a class="anchor" aria-label="anchor" href="#running"></a>
</h2>
<p>Now you are ready to run your analysis. All you have to do is to pass
your data to the compiled executable and choose how many independent
runs you want to do.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_run.html">tp_run</a></span><span class="op">(</span>compiled_model <span class="op">=</span> <span class="va">exe_path</span>, data <span class="op">=</span> <span class="va">data_path</span>, n_runs <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="convergence">Convergence<a class="anchor" aria-label="anchor" href="#convergence"></a>
</h2>
<p>Then you can parse your output to produce a data frame and check for
convergence.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If using SMC</span></span>
<span><span class="va">output_df_smc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_parse_smc.html">tp_parse_smc</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tp_smc_convergence.html">tp_smc_convergence</a></span><span class="op">(</span><span class="va">output_df_smc</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If using MCMC</span></span>
<span><span class="va">output_df_mcmc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tp_parse_mcmc.html">tp_parse_mcmc</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="post-processing">Post-processing<a class="anchor" aria-label="anchor" href="#post-processing"></a>
</h2>
<p>Different models produce different outputs and thus require different
post-processing. See the model-specific tutorials for ways to process
your TreePPL.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mariana P Braga.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>

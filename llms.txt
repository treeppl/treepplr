# treepplr

## Overview

treepplr is the R Interface to [TreePPL](https://treeppl.org), a
probabilistic programming language for phylogenetics.

treepplr converts data to a format readable by TreePPL, reads the
TreePPL output, and connects to downstream analyses in model-specific
packages, such as the [evolnets](https://github.com/maribraga/evolnets)
package for the host repertoire evolution model.

See the packageâ€™s documentation [here](https://treeppl.org/treepplr).
There you will find all package functions under
[Reference](https://treeppl.org/treepplr/reference/index.html), and
basic examples of running various models under
[Articles](https://treeppl.org/treepplr/articles/index.html).

## Installation

You can install treepplr like so:

``` r
if(!require("devtools", quietly = TRUE)) {
  install.packages("devtools")
  library(devtools)
} else {
 library(devtools)
}

devtools::install_github("treeppl/treepplr")
```

This will only install the R package. The TreePPL compiler will not be
downloaded and installed until you run your first analysis, and the
TreePPL compiler is called. During the download, you will see a message
like this

    [xx%] Downloaded xxxxxx bytes...

In subsequent analyses, the TreePPL compiler will be called directly,
skipping this step.

# Package index

## All functions

- [`tp_check_input()`](http://treeppl.org/treepplr/reference/tp_check_input.md)
  : Check input for inference with TreePPL

- [`tp_compile()`](http://treeppl.org/treepplr/reference/tp_compile.md)
  :

  Compile for
  [`tp_run()`](http://treeppl.org/treepplr/reference/tp_run.md)

- [`tp_data()`](http://treeppl.org/treepplr/reference/tp_data.md) :
  Import data for TreePPL program

- [`tp_fp_fetch()`](http://treeppl.org/treepplr/reference/tp_fp_fetch.md)
  : Fetch the latest version of treeppl

- [`tp_json_to_phylo()`](http://treeppl.org/treepplr/reference/tp_json_to_phylo.md)
  : Convert TreePPL multi-line JSON to R phylo/multiPhylo object with
  associated weights

- [`tp_list()`](http://treeppl.org/treepplr/reference/tp_list.md) :
  Create a flat list

- [`tp_map_tree()`](http://treeppl.org/treepplr/reference/tp_map_tree.md)
  : Find the Maximum A Posteriori (MAP) Tree from weighted samples

- [`tp_model()`](http://treeppl.org/treepplr/reference/tp_model.md) :
  Import a TreePPL model

- [`tp_model_names()`](http://treeppl.org/treepplr/reference/tp_model_names.md)
  : Model names supported by treepplr

- [`tp_parse()`](http://treeppl.org/treepplr/reference/tp_parse.md) :
  Parse simple TreePPL json output

- [`tp_parse_host_rep()`](http://treeppl.org/treepplr/reference/tp_parse_host_rep.md)
  : Parse TreePPL json output for host repertoire model

- [`tp_phylo_to_tpjson()`](http://treeppl.org/treepplr/reference/tp_phylo_to_tpjson.md)
  : Convert phylo obj to TreePPL tree

- [`tp_phylo_to_tppl_tree()`](http://treeppl.org/treepplr/reference/tp_phylo_to_tppl_tree.md)
  : Convert phylo to a tppl_tree

- [`tp_run()`](http://treeppl.org/treepplr/reference/tp_run.md) : Run a
  TreePPL program

- [`tp_smc_convergence()`](http://treeppl.org/treepplr/reference/tp_smc_convergence.md)
  : Check for convergence across multiple SMC sweeps/runs

- [`tp_stored_compiled()`](http://treeppl.org/treepplr/reference/tp_stored_compiled.md)
  :

  List of compiled models in
  [base::tempdir](https://rdrr.io/r/base/tempfile.html)

- [`tp_stored_data()`](http://treeppl.org/treepplr/reference/tp_stored_data.md)
  :

  Data file names stored by user in
  [base::tempdir](https://rdrr.io/r/base/tempfile.html) using tp_write

- [`tp_stored_model()`](http://treeppl.org/treepplr/reference/tp_stored_model.md)
  :

  Model file names stored by user in
  [base::tempdir](https://rdrr.io/r/base/tempfile.html) using tp_write

- [`tp_tempdir()`](http://treeppl.org/treepplr/reference/tp_tempdir.md)
  : Temporary directory for running treeppl

- [`tp_treeppl()`](http://treeppl.org/treepplr/reference/tp_treeppl.md)
  : Compile and run a TreePPL program

- [`tp_treeppl_json()`](http://treeppl.org/treepplr/reference/tp_treeppl_json.md)
  : Convert a tppl_tree to TreePPL json str

- [`tp_write()`](http://treeppl.org/treepplr/reference/tp_write.md) :

  Prepare input for
  [`tp_compile()`](http://treeppl.org/treepplr/reference/tp_compile.md)

- [`tree_age_cumul()`](http://treeppl.org/treepplr/reference/tree_age_cumul.md)
  : Calculate age in a tppl_tree

# Articles

### All vignettes

- [Coin flipping](http://treeppl.org/treepplr/articles/coin-example.md):
- [Constant rate birth (CRB)
  model](http://treeppl.org/treepplr/articles/constant-rate-birth.md):
- [Host repertoire model
  example](http://treeppl.org/treepplr/articles/hostrep-example.md):
- [Tree
  inference](http://treeppl.org/treepplr/articles/tree_inference.md):
